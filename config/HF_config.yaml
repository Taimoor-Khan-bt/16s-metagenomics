# Configuration for HF Dataset

project:
  name: "HF-Analysis"
  sequencing_type: "16s"
  output_dir: "output/HF"
  first_run: false
  random_seed: 1234
  threads: 4

io:
  input_dir: "HF"
  cohort: "HF"
  metadata_csv: "HF_metadata.csv"

metadata:
  id_column: "Sample ID"
  primary_comparison:
    group_column: "Group"
    levels: ["Buffalo", "Cow", "Goat"]
    reference: "Buffalo"
  secondary_comparisons:
    - variable: "Secondary Host"
      enabled: false
    - variable: "Primary Host"
      enabled: false
    - variable: "Extraction"
      enabled: false
    - variable: "Sex"
      enabled: false
    - variable: "AgeCategory"
      enabled: false
    - variable: "Anemia"
      enabled: false
    - variable: "Stunting"
      enabled: false
    - variable: "Underweight"
      enabled: false
    - variable: "Wasting"
      enabled: false
    - variable: "Overweight"
      enabled: false
    - variable: "CariesPresence"
      enabled: false
  continuous_variables:
    - name: "AgeMonths"
      enabled: false
    - name: "Hemoglobin"
      enabled: false
    - name: "dmft"
      enabled: false

amplicon:
  region: "V3-V4"
  fwd_primer: "CCTACGGGNGGCWGCAG"
  rev_primer: "GACTACHVGGGTATCTAATCC"
  expected_length:
    min: 400
    max: 470
  phylogeny:
    build_tree: true

quality:
  truncLen_fwd: 0
  truncLen_rev: 0
  maxN: 0
  maxEE_fwd: 2
  maxEE_rev: 2
  truncQ: 2
  rm.phix: true
  compress: true
  multithread: true

taxonomy:
  train_set: "silva_nr99_v138.1_train_set.fa"
  species_assignment: "silva_species_assignment_v138.1.fa"
  minBoot: 50

diversity:
  rarefaction:
    enabled: true
    depth: "auto"
  alpha:
    metrics:
      - "Observed"
      - "Shannon"
      - "Simpson"
  beta:
    methods:
      - "bray"
      - "jaccard"
    permutations: 999

analysis:
  mode: "comprehensive"
  compare_by: "Group"
  alpha:
    stratify_by_secondary: false # No secondary variables to stratify by
    correlate_continuous: false # No continuous variables to correlate
  beta:
    test_multifactor: false # Only one grouping variable
    plot_secondary: false # No secondary variables to plot
  pairwise_comparisons:
    enabled: true
    contrasts:
      - group1: "Cow"
        group2: "Buffalo"
      - group1: "Goat"
        group2: "Buffalo"
  differential_abundance:
    enabled: true
    methods: ["deseq2"]
    taxonomic_rank: "Genus"
    min_prevalence: 0.1
    min_abundance: 0.0001
    p_adjust_method: "fdr"
    log2fc_threshold: 1.0
    alpha_threshold: 0.1
  group_comparisons:
    enabled: true
    variables: ["Group"]
    taxonomic_ranks: ["Phylum", "Class", "Order", "Family", "Genus"]
    top_n: 15
    include_stats: true
    alpha_threshold: 0.1
    highlight_threshold: 0.05

statistical:
  alpha_diversity:
    test: "kruskal"
    p_adjust: "fdr"
  beta_diversity:
    test: "adonis"
    p_adjust: "fdr"

visualization:
  theme: "classic"
  color_palette: "okabe-ito"
  base_size: 14
  font_family: "sans"

plots:
  enable:
    alpha: true
    beta: true
    composition: true
    heatmap: true
    tree_rectangular: true
    tree_circular: true
    group_comparisons: true
    differential_abundance: true
  composition:
    taxonomic_ranks: ["Phylum", "Class", "Order", "Family", "Genus"]
    top_n: 10
  heatmap:
    taxonomic_ranks: ["Class", "Order", "Family", "Genus"]
    top_n: 15
    cluster_samples: true
    cluster_taxa: true
  group_comparison:
    taxonomic_ranks: ["Phylum", "Class", "Order", "Family", "Genus"]
    top_n: 15
    show_stats: true
    plot_type: "boxplot"
  output:
    formats: ["tiff", "pdf"]
    dpi: 600
    width: 12
    height: 8

filtering:
  min_reads_per_sample: 1000
  min_prevalence: 0.1
  min_abundance: 0.0001
